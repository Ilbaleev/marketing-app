<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ–º</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <script type="module" src="js/main.js"></script>
</head>
<body>
    <main class="container">
        <section id="dashboard" class="page active">
            <div class="header">
                <h1>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
                <p id="welcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</p>
                <p class="hint hidden" id="activeUserInfo"></p>
            </div>

            <div class="stats">
                <div class="page-header">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <button class="secondary-button" id="refreshDashboard">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div id="statsError" class="error hidden"></div>
                <div class="stat-item">
                    <span>–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:</span>
                    <strong id="activeTasks">-</strong>
                </div>
                <div class="stat-item">
                    <span>–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è:</span>
                    <strong id="completedTasks">-</strong>
                </div>
                <div class="stat-item">
                    <span>–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ:</span>
                    <strong id="overdueTasks">-</strong>
                </div>
                <p class="hint" id="statsUpdatedAt">–û–±–Ω–æ–≤–ª–µ–Ω–æ: ‚Äî</p>
            </div>

            <p class="hint hidden" id="demoNotice">–°–µ–π—á–∞—Å –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ ‚Äî –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ DEMO_TASKS –∏ –Ω–µ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –ë–∏—Ç—Ä–∏–∫—Å24.</p>

            <nav class="menu">
                <button class="menu-button" data-page-target="tasks">üìã –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏</button>
                <button class="menu-button" data-page-target="analytics">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
                <button class="menu-button" data-page-target="projects">üìÅ –ü—Ä–æ–µ–∫—Ç—ã</button>
                <button class="menu-button" data-page-target="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </nav>
        </section>

        <section id="tasks" class="page">
            <button class="back-button" data-action="back">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="page-header">
                <h2>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                <div class="page-actions">
                    <select id="taskStatusFilter">
                        <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                        <option value="overdue">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ</option>
                        <option value="completed">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ</option>
                        <option value="all">–í—Å–µ</option>
                    </select>
                    <button class="secondary-button" id="refreshTasks">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
            </div>
            <p class="hint">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω—É–∂–Ω—ã–π –Ω–∞–±–æ—Ä –∑–∞–¥–∞—á.</p>
            <div id="tasksError" class="error hidden"></div>
            <div id="tasksContent" class="task-list">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</div>
            </div>
            <p class="hint" id="tasksUpdatedAt">–û–±–Ω–æ–≤–ª–µ–Ω–æ: ‚Äî</p>
        </section>

        <section id="analytics" class="page">
            <button class="back-button" data-action="back">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="page-header">
                <h2>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                <button class="secondary-button" id="refreshAnalytics">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
            <p class="hint">–†–∞–∑–¥–µ–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–¥–∫—É –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º –∑–∞–¥–∞—á.</p>
            <div id="analyticsError" class="error hidden"></div>
            <div id="analyticsContent">
                <div class="loading">–°—á–∏—Ç–∞–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏...</div>
            </div>
            <p class="hint" id="analyticsUpdatedAt">–û–±–Ω–æ–≤–ª–µ–Ω–æ: ‚Äî</p>
        </section>

        <section id="projects" class="page">
            <button class="back-button" data-action="back">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="page-header">
                <h2>–ü—Ä–æ–µ–∫—Ç—ã</h2>
            </div>
            <p class="hint">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ –ø–æ–Ω–∏–º–∞–ª–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã.</p>
            <form id="projectForm" class="card form-card">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
                <div class="form-grid">
                    <label class="form-field">
                        <span>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</span>
                        <input type="text" name="name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –†–µ–¥–∏–∑–∞–π–Ω —Å–∞–π—Ç–∞">
                    </label>
                    <label class="form-field">
                        <span>–°—Ç–∞—Ç—É—Å</span>
                        <select name="status" id="projectStatusInput" required>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–π</option>
                            <option value="completed">–ó–∞–≤–µ—Ä—à—ë–Ω</option>
                            <option value="paused">–ù–∞ –ø–∞—É–∑–µ</option>
                        </select>
                    </label>
                    <label class="form-field">
                        <span>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</span>
                        <select name="priority" required>
                            <option value="medium">–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                            <option value="elevated">–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                            <option value="high">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                        </select>
                    </label>
                    <label class="form-field">
                        <span>–°–∞–π—Ç</span>
                        <input type="url" name="siteUrl" placeholder="https://example.ru">
                    </label>
                    <label class="form-field">
                        <span>–°—Å—ã–ª–∫–∞ –Ω–∞ –î–∏—Å–∫</span>
                        <input type="url" name="driveUrl" placeholder="https://disk.yandex.ru/d/example2...">
                    </label>
                    <label class="form-field">
                        <span>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</span>
                        <input type="date" name="createdAt">
                    </label>
                </div>
                <button type="submit" class="menu-button">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
            </form>

            <div class="page-actions project-actions">
                <label for="projectStatusFilter" class="sr-only">–§–∏–ª—å—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞</label>
                <select id="projectStatusFilter">
                    <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                    <option value="completed">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ</option>
                    <option value="paused">–ù–∞ –ø–∞—É–∑–µ</option>
                    <option value="all">–í—Å–µ</option>
                </select>
            </div>

            <div id="projectContent" class="project-list">
                <div class="empty-state">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç, —á—Ç–æ–±—ã –æ–Ω –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ.</div>
            </div>
        </section>

        <section id="settings" class="page">
            <button class="back-button" data-action="back">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="page-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏</h2>
            </div>

            <div class="info-block">
                <h3>–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–∏—Ç—Ä–∏–∫—Å24</h3>
                <ol>
                    <li>–°–æ–∑–¥–∞–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è¬ª –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞.</li>
                    <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –≤–∏–¥–∞ <code>https://example.bitrix24.ru/rest/ID/–∫–ª—é—á/</code> –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –µ—ë –≤ <code>CONFIG.BITRIX_WEBHOOK</code>.</li>
                    <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–µ–±—Ö—É–∫–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.</li>
                </ol>
            </div>

            <div class="info-block">
                <h3>–°–≤—è–∑–∫–∞ Telegram ‚Üî Bitrix24</h3>
                <p>–î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ –æ–±—ä–µ–∫—Ç <code>USER_MAPPING</code>, –≥–¥–µ –∫–ª—é—á ‚Äî —ç—Ç–æ Telegram ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –µ–≥–æ ID –≤ –ë–∏—Ç—Ä–∏–∫—Å24.</p>
                <pre class="config-snippet"><code>USER_MAPPING: {
    '721249582': '13',
    '123456789': '1'
    '458063074': '27', 
    '1607374454': '41', 
    '458152540': '29', 
    '501925619': '23', 
    '1207928336': '21', 
    '2045661348': '15', 
    '478800727': '11', 
    '1893698989': '39', 
    '1816572561': '53', 
    '7329272763': '25', 
    '865562957': '31', 
    '5555097406': '35', 
    '7384473922': '47', 
    '993670406': '55',
}</code></pre>
                <p class="hint">–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ @userinfobot.</p>
            </div>

            <div class="info-block">
                <h3>–†–µ–∂–∏–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞</h3>
                <p>–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω–µ Telegram –∏–ª–∏ –µ—â—ë –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, –≤–∫–ª—é—á–∏—Ç–µ <code>CONFIG.DEMO_MODE = true</code>. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∏–∑ <code>DEMO_TASKS</code>, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
            </div>

            <div class="info-block">
                <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</h3>
                <p>–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ Telegram, –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å—Å—ã–ª–∫—É –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä:</p>
                <pre class="config-snippet"><code>?telegram_id=721249582&amp;demo=0</code></pre>
                <p class="hint">–î–æ—Å—Ç—É–ø–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã <code>telegram_id</code>, <code>bitrix_user_id</code>, <code>demo</code> –∏ <code>webhook</code>. –û–Ω–∏ –ø–æ–º–æ–≥—É—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏ –≤–µ–±—Ö—É–∫–∏.</p>
                <button class="secondary-button" id="testConnection">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Bitrix24</button>
                <p class="hint hidden" id="connectionResult"></p>
            </div>
        </section>
    </main>
</body>
</html>
